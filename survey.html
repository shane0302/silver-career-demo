<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>銀齡新動力 - 問卷 Survey</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="bg-decoration" aria-hidden="true">
    <div class="circle c1"></div>
    <div class="circle c2"></div>
  </div>

  <header>
    <h1><i class="fas fa-clipboard-list"></i> 問卷 Survey</h1>
    <p>請選擇你的條件（含技能偏好），系統會計算 Top 3 推薦與匹配度</p>
    <p style="margin-top:14px;font-size:.98rem;opacity:.9;">
      <a class="small-link" href="./index.html"><i class="fas fa-house"></i> 回首頁</a>
      &nbsp;|&nbsp;
      <a class="small-link" href="./result.html"><i class="fas fa-square-poll-vertical"></i> 直接看結果</a>
    </p>
  </header>

  <main class="main-container">
    <section class="card">
      <h2 class="section-title">選擇你的適職條件</h2>
      <p class="muted" id="helloName" style="margin-top:-8px;"></p>

      <div class="grid-questions">
        <div>
          <label><i class="fas fa-heart"></i> 興趣方向</label>
          <select id="q_interest">
            <option value="talk">熱衷交流分享</option>
            <option value="fix">專注手作修理</option>
            <option value="admin">穩定行政處理</option>
          </select>
        </div>
        <div>
          <label><i class="fas fa-screwdriver-wrench"></i> 技能偏好</label>
          <select id="q_skill">
            <option value="doc">文書（文件/表單/打字）</option>
            <option value="service">服務（接待/門市/客服）</option>
            <option value="craft">手作（維修/工藝/修繕）</option>
            <option value="guide">導覽（解說/帶團/分享）</option>
          </select>
        </div>


        <div>
          <label><i class="fas fa-dumbbell"></i> 體能狀況</label>
          <select id="q_phys">
            <option value="low">希望室內靜態</option>
            <option value="mid">可接受適度走動</option>
          </select>
        </div>

        <div>
          <label><i class="fas fa-clock"></i> 工作時段</label>
          <select id="q_time">
            <option value="flex">彈性兼職 (Part-time)</option>
            <option value="full">穩定全職 (Full-time)</option>
          </select>
        </div>

        <div>
          <label><i class="fas fa-laptop"></i> 數位適應</label>
          <select id="q_tech">
            <option value="low">基礎 (手機使用)</option>
            <option value="high">進階 (電腦文書)</option>
          </select>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn btn-primary" id="btnAnalyze" type="button"><i class="fas fa-magic"></i> 開始智能媒合分析</button>
        <button class="btn btn-ghost" id="btnReset" type="button"><i class="fas fa-rotate-left"></i> 清除已存資料</button>
      </div>

      <div id="loader">
        <div class="spinner"></div>
        <p class="muted">正在計算匹配度並生成推薦理由卡片...</p>
      </div>
    </section>
  </main>

  <footer class="footer">
   </footer>

  <!-- 原本就有的外部 JS（先保留） -->
  <script src="./js/common.js"></script>
  <script src="./js/survey.js"></script>

  <!-- ✅ 保險綁定：就算外部 JS 沒綁到，按鈕也一定會動 -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("btnAnalyze");
      if (!btn) {
        alert("找不到按鈕 btnAnalyze（請確認 HTML 的 id 是否正確）");
        return;
      }

      btn.addEventListener("click", () => {
        const data = {
          interest: document.getElementById("q_interest")?.value,
          skill: document.getElementById("q_skill")?.value,
          phys: document.getElementById("q_phys")?.value,
          time: document.getElementById("q_time")?.value,
          tech: document.getElementById("q_tech")?.value,
        };

        // 有任何欄位抓不到就提示（避免你按了沒反應）
        for (const [k, v] of Object.entries(data)) {
          if (v == null) {
            alert("問卷欄位 id 抓不到：" + k + "（請確認 survey.html 的 select id）");
            return;
          }
        }

        // 存進 localStorage，result.html 用這個 key 去讀
        localStorage.setItem("silverSurvey", JSON.stringify(data));

        // 跳到結果頁
        window.location.href = "result.html";
      });
    });
  </script>
</body>
</html>
